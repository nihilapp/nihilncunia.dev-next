# 멀티 블로그 플랫폼 개발 플랜

## 프로젝트 개요
- **목적**: 개인용 멀티 블로그 플랫폼 구축
- **현재 브랜치**: `migration-to-server-action`
- **상태**: 인증 시스템 서버 액션 마이그레이션 완료

## 완료된 작업 

### 1. 기본 인프라 구축
- [x] Next.js 15 + React 19 프로젝트 설정
- [x] Drizzle ORM 마이그레이션 (Prisma에서 전환)
- [x] Tailwind CSS v4 설정
- [x] 라우트 그룹 구조 설계 (5개 그룹)
- [x] TypeScript 설정 및 ESLint 구성

### 2. 인증 시스템 (Production Ready)
- [x] Supabase Auth 통합
- [x] 60자리 패스코드 보안 시스템 구현 (페이지 접근 제어)
- [x] OTP 기반 2FA 시스템 (otplib 사용)
- [x] 서버 액션 기반 인증 플로우
- [x] JWT 토큰 검증 시스템
- [x] bcrypt 패스워드 해싱
- [x] 회원가입 플로우 (정보 입력 → OTP 설정 → QR코드 → 인증 → 완료)
- [x] 로그인 플로우 (이메일/비밀번호 → OTP 인증 → 완료)
- [x] 가드 시스템 (패스코드 발송/검증)
- [x] 홈페이지 세션 정보 표시
- [x] **보안 강화**: 민감한 데이터 쿠키 기반 저장 (URL 노출 방지)
- [x] **브루트 포스 방어**: Rate limiting 시스템 (패스코드/OTP)
- [x] **에러 처리**: React Error Boundary 전체 적용
- [x] **사용자 경험**: 시도 횟수 표시, 잠금 시간 안내

### 3. 데이터베이스 스키마
- [x] Profiles 테이블 (역할 기반 접근 제어)
- [x] Drizzle 마이그레이션 시스템
- [x] Supabase 통합 및 트리거/뷰 설정

### 4. 컴포넌트 구조
- [x] shadcn/ui 컴포넌트 시스템
- [x] class-variance-authority 활용
- [x] 기본 UI 컴포넌트들 (버튼, 카드, 폼 등)
- [x] 인증 관련 컴포넌트들
- [x] 빈 관리자 페이지 템플릿들

### 5. 개발 환경
- [x] Logger 유틸리티 시스템
- [x] 개발/빌드 스크립트 설정
- [x] pnpm 패키지 관리
- [x] Zustand v5 상태 관리
- [x] **보안 유틸리티**: Rate limiting, 쿠키 보안 관리
- [x] **에러 처리**: 통합 에러 바운더리 시스템

## 다음 단계 계획

### Phase 1: 블로그 데이터 모델링 (우선순위: 높음)
- [ ] **데이터베이스 스키마 설계**
  - [ ] blogs (블로그 정보)
  - [ ] categories (카테고리)
  - [ ] tags (태그)
  - [ ] posts (포스트)
  - [ ] comments (댓글) - 나중에

- [ ] **Drizzle 테이블 정의**
  - [ ] `app/_entities/blogs/blogs.table.ts`
  - [ ] `app/_entities/categories/categories.table.ts`
  - [ ] `app/_entities/tags/tags.table.ts`
  - [ ] `app/_entities/posts/posts.table.ts`

### Phase 2: 메인 페이지 구현 (우선순위: 높음)
- [ ] **메인 페이지 (`/`)**
  - [ ] 블로그 목록 표시
  - [ ] 최근 글 6개 표시
  - [ ] 반응형 디자인

- [ ] **블로그 상세 페이지 (`/blogs/[blogId]`)**
  - [ ] 포스트 목록
  - [ ] 카테고리별 필터링
  - [ ] 태그별 필터링
  - [ ] 검색 기능
  - [ ] 날짜별 아카이브

### Phase 3: 관리자 시스템 구현 (우선순위: 중간)
- [ ] **통합 관리자 (`/admin`)**
  - [ ] 블로그 관리 (생성/수정/삭제)
  - [ ] 포스트 관리
  - [ ] 카테고리/태그 관리
  - [ ] 설정 관리

- [ ] **개별 블로그 관리자 (`/blogs/[blogId]/admin`)**
  - [ ] 해당 블로그 전용 관리
  - [ ] 포스트 작성/편집
  - [ ] 카테고리/태그 관리
  - [ ] 댓글 관리 (나중에)

### Phase 4: 에디터 시스템 구현 (우선순위: 중간)
- [ ] **마크다운 에디터**
  - [ ] WYSIWYG 또는 Split View
  - [ ] 툴바 버튼 (굵게, 기울임 등)
  - [ ] 미리보기 기능
  - [ ] 이미지 업로드 (나중에)

- [ ] **포스트 관리**
  - [ ] 초안 저장
  - [ ] 발행/비공개 전환
  - [ ] 메타데이터 설정

### Phase 5: 검색 및 필터링 (우선순위: 낮음)
- [ ] **검색 시스템**
  - [ ] 전문 검색
  - [ ] 카테고리별 검색
  - [ ] 태그별 검색
  - [ ] 날짜 범위 검색

- [ ] **아카이브 시스템**
  - [ ] 연도별 아카이브
  - [ ] 월별 아카이브
  - [ ] 태그 클라우드

### Phase 6: 추가 기능 (우선순위: 낮음)
- [ ] 댓글 시스템
- [ ] SEO 최적화
- [ ] 사이트맵 생성
- [ ] RSS 피드
- [ ] 이미지 업로드 및 관리

## 기술적 고려사항

### 아키텍처 원칙
- Server Components 우선 사용
- **Server Actions 중심**: API 대신 Server Actions로 모든 mutation 처리
- 라우트별 액션 구조: `app/(route)/_actions/` 폴더에 route-specific actions
- 메인 액션 파일: `*.action.ts`가 핵심 액션 함수 포함
- 헬퍼 액션: 지원 함수들은 별도 파일로 분리
- `useActionState` 훅으로 폼 상태 관리
- React Query로 클라이언트 상태 관리 (GET 요청용)
- Zustand로 전역 상태 관리

### 보안 고려사항
- 모든 관리자 기능은 인증 필수
- 60자리 패스코드 + OTP 이중 보안
- Supabase Auth 토큰 검증
- SQL 인젝션 방지 (Drizzle ORM)

### 성능 고려사항
- 이미지 최적화 (Next.js Image)
- 페이지네이션
- 캐싱 전략
- 번들 최적화

## 개발 우선순위

1. **즉시 처리** (1주일)
   - [ ] 블로그 데이터 모델 설계 및 구현
   - [ ] 기본 CRUD 서버 액션 구현

2. **단기** (2주일)
   - [ ] 메인 페이지 및 블로그 상세 페이지
   - [ ] 관리자 시스템 기본 기능

3. **중기** (3-4주일)
   - [ ] 에디터 시스템
   - [ ] 포스트 작성/편집 기능

4. **장기** (1개월+)
   - [ ] 검색 및 필터링
   - [ ] 추가 기능들

## 현재 상황 요약

✅ **완료**: 기본 인프라, **인증 시스템 100% (Production Ready)**, 프로젝트 구조  
📋 **다음**: 블로그 데이터 모델링  

**🎉 인증 시스템 완전 완성!**
- **보안**: Rate limiting, 민감한 데이터 보호, 브루트 포스 방어
- **안정성**: React Error Boundary로 모든 에러 상황 처리
- **사용자 경험**: 직관적인 피드백과 복구 메커니즘

이제 실제 블로그 기능 구현을 시작할 수 있는 단계입니다.